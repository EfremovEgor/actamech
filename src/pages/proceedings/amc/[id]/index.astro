---
export const prerender = false;
import BaseInformationPageLayout from "@layouts/BaseInformationPageLayout.astro";
import ArticleCard from "@components/common/articles/ArticleCard";
import SectionTitleNoContainer from "@components/common/SectionTitleNoContainer.astro";
const { id } = Astro.params;
import mainImage from "@assets/images/mainImages/futuristic_spaceship_orbits_planet_powered_by_solar_panels_fuel.jpg";
import { NAVIGATION } from "@lib/client/navigation";
import { ARTICLES } from "src/pages/articles/ExampleArticle";
import { getProceedingVolumeById } from "src/api/api";
import { resolveArticleType } from "@lib/articles";
const article = ARTICLES[0];

if (!id) return new Response(null, { status: 404 });
const response = await getProceedingVolumeById(id);
if (!response) return new Response(null, { status: 404 });
const volumeData = response.data;
---

<BaseInformationPageLayout
	head={{
		title: volumeData.title,
		description: volumeData.description,
	}}
	navigation={{
		navigation: [
			...NAVIGATION.proceedings.advancesInMechanicsAndControl,
			{
				name: volumeData.title,
				url: `/proceedings/advances-in-mechanics-and-control/volumes/${volumeData.id}`,
			},
		],
	}}
	image={mainImage}
	pageTitle={`${volumeData.proceeding.title}`}
>
	<div class="border-y-accent border-b-2">
		<div class="container mx-auto py-4">
			<h1 class="text-3xl">Proceedings, {volumeData.title}</h1>
		</div>
	</div>
	<div class="container mx-auto mt-8">
		<div class="grid grid-cols-[max-content_1fr] items-center gap-8 mt-4">
			<img
				src={`/images/covers/${volumeData.id}.webp`}
				alt={volumeData.title}
				class="h-80 w-fit"
			/>
			<div
				class="bg-secondary/5 h-full flex flex-col justify-center rounded-base px-4 py-4 text-lg w-full"
			>
				<p class="text-xl">{volumeData.conference_full_name}</p>
				<p class="text-sm my-1 text-tertiary-text">
					{volumeData.place} |
					{volumeData.held_at}
				</p>
				<div class="flex flex-col">
					<h2 class="font-bold">Volume Editors:</h2>
					{
						volumeData.editors.map((ed) => (
							<p>
								{ed.first_name} {ed.last_name}, {ed.institution}
								, {ed.country}
							</p>
						))
					}
				</div>
				<div class="text-tertiary-text">
					<p>Number of Papers:</p>
					<p>Views 000 | Downloads 000 | Citations 0</p>
				</div>
				<article class="base-text-section"></article>
			</div>
		</div>
		<SectionTitleNoContainer title="Articles" />
		<div class="flex flex-col gap-8 mt-8">
			{
				volumeData.articles.map((article) => (
					<ArticleCard
						client:visible
						{...{
							...article,
							link: `${volumeData.id}/${article.id}`,
						}}
					/>
				))
			}
			<!-- abstract={ -->
			<!-- // 	article.content.find(
							// 		(content) => content.type == "abstract"
							// 	)?.content
							// }
							// extra="Research Article | March 21, 2025" -->
		</div>
	</div>
</BaseInformationPageLayout>
