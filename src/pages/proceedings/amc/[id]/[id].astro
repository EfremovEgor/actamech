---
export const prerender = false;
import ArticleNav from "@components/articles/ArticleNav";
import "@styles/articles/articles.css";
import ArticleContent from "@components/articles/ArticleContent";
import Authors from "@components/pages/article-item/Authors";
import BaseLayout from "@layouts/BaseLayout.astro";
import Breadcrumb from "@components/common/Breadcrumb.astro";
import { resolveArticleType } from "@lib/articles";
import { getArticleById } from "src/api/api";
const { id } = Astro.params;
if (!id) return new Response(null, { status: 404 });
const response = await getArticleById(id);
if (!response) return new Response(null, { status: 404 });
const articleData = response.data;
---

<BaseLayout
	head={{
		title: articleData.title,
		description: articleData.abstract,
	}}
>
	<div class="container mx-auto mt-8">
		<Breadcrumb
			{...{
				navigation: [
					{ name: "Home", url: "/" },
					{
						name: "Proceedings",
					},
					{
						name: "Advances in Mechanics and Control",
						url: "/proceedings/amc",
					},
					{
						name: `${articleData.volume.id}`,
						url: `/proceedings/amc/${articleData.volume.id}`,
					},
					{
						name: `${id}`,
						url: `/proceedings/amc/${articleData.volume.id}/${id}`,
					},
				],
			}}
		/>
	</div>
	<div class="container mx-auto">
		<div class="border-b-secondary border-b-2 pb-8">
			<div class="text-center mt-8">
				<h1 class="text-3xl uppercase">ACTA MECHANICA ET IMPERIUM</h1>
			</div>
		</div>
		<div class="mt-8 border-b-secondary border-b-2 pb-4">
			<div class="text-center mt-16">
				<h2 class="mt-2">Advances in Mechanics and Control</h2>
				<h2>
					Volume {articleData.volume.volume_number}, {
						new Date(
							articleData.volume.published_at
						).toLocaleString("en-US", {
							month: "long",
							year: "numeric",
						})
					}, {
						articleData.pages_in_volume
							? `Pages ${articleData.pages_in_volume}`
							: articleData.id.toUpperCase()
					}
				</h2>
				<h1 class="text-3xl font-semibold">{articleData.title}</h1>
				<Authors client:load authors={articleData.authors} />
				<div class="text-primary-text/40">
					{
						articleData.received_at && (
							<p>
								Received at{" "}
								{new Date(
									articleData.received_at
								).toLocaleDateString()}
							</p>
						)
					}
					{
						articleData.revised_at && (
							<p>
								Revised at{" "}
								{new Date(
									articleData.revised_at
								).toLocaleDateString()}
							</p>
						)
					}
				</div>
			</div>
			<div
				class="flex flex-row justify-between text-primary-text/30 mt-16"
			>
				<span
					class="pb-1 border-b-accent border-b-1 font-semibold w-fit text-left"
				>
					{resolveArticleType(articleData.type)}
				</span>
				<span
					class="pb-1 border-b-accent border-b-1 font-semibold w-fit text-right"
				>
					<a
						target="_blank"
						href=`https://doi.org/${articleData.doi}`
					>
						{articleData.doi}
					</a>
				</span>
			</div>
		</div>

		<div class="flex flex-row mt-16 article_grid">
			<ArticleNav client:load article={articleData} />
			<ArticleContent article={articleData} />
		</div>
	</div>
</BaseLayout>
